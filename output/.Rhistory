source('~/simpleR/allom/Allometry.R')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
setwd('~/simpleTree/output')
files <- list.files(pattern="GrowthVolume.csv$")
source('~/.active-rstudio-document')
files <- list.files(pattern="detailed.csv$")
i<-files[1]
data <- read.csv(i)
x<-data[,8]
y<-data[,10]
x.log <- log(x[which(x>0.03)])
y.log <- log(y[which(x>0.03)])
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
dev.off()
dev.off()
dev.off()
library(nls2)
setwd('~/simpleTree/output')
files <- list.files(pattern="detailed.csv$")
col<-rgb(runif(length(files)),runif(length(files)),runif(length(files)))
j = 1;
pdf('~/simpleR/allom/all.pdf')
plot(0,0,xlim = c(0,0.15), ylim = c(0,0.3),xlab ="radius", ylab = "volume")
for(i in files) {
setwd('~/simpleTree/output')
data <- read.csv(i)
x<-data[,8]
y<-data[,10]
x.log <- log(x[which(x>0.03)])
y.log <- log(y[which(x>0.03)])
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
#text(max(x),max(y),substr(i,1,9))
# points(data[,2],data[,3],col = col[j])
j = j+1;
}
View(data)
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
# points(data[,2],data[,3],col = col[j])
j = j+1;
data <- read.csv(i)
View(data2)
setwd('~/simpleTree/output')
data <- read.csv(i)
x<-data[,8]
y<-data[,10]
x.log <- log(x[which(x>0.03)])
y.log <- log(y[which(x>0.03)])
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
leg.txt = files
legend("topleft",  leg.txt
,col= col
,bty = "n"
,lwd = c(2,2)
,cex =0.35
,pt.cex =0.35
)
dev.off()
dev.off()
setwd('~/simpleTree/output')
data <- read.csv(i)
x<-data[,8]
y<-data[,10]
x.log <- log(x[which(x>0.03)])
y.log <- log(y[which(x>0.03)])
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
#text(max(x),max(y),substr(i,1,9))
# points(data[,2],data[,3],col = col[j])
j = j+1;
source('~/.active-rstudio-document')
y.log
y
is.nan(y.log)
y.log
is.infinite(y.log)
y.log[is.infinite(y.log)]
y.log[is.infinite(y.log)] = 0
y.log[is.infinite(y.log)]
source('~/.active-rstudio-document')
files[i]
files[1]
paste('~/SimpleR/allom/',i,'.pdf',sep='')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
files[1]
data <- read.csv(i)
x<-data[,10]
y<-data[,8]
x.log <- log(x[which(x>0.03)])
y.log <- log(y[which(x>0.03)])
y.log[is.infinite(y.log)] = 0
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
library(nls2)
x.log <- log(x)
y.log <- log(y)
source('~/.active-rstudio-document')
data <- read.csv(i)
x<-data[,10]
y<-data[,8]
x.log <- log(x)
y.log <- log(y)
library(nls2)
setwd('~/simpleTree/output')
files <- list.files(pattern="detailed.csv$")
col<-rgb(runif(length(files)),runif(length(files)),runif(length(files)))
j = 1;
pdf('~/simpleR/allom/all.pdf')
plot(0,0,xlim = c(0,0.15), ylim = c(0,0.3),xlab ="radius", ylab = "volume")
for(i in files) {
setwd('~/simpleTree/output')
data <- read.csv(i)
x<-data[,10]
y<-data[,8]
x.log <- log(x)
y.log <- log(y)
# x.log <- log(x[which(x>0.03)])
#  y.log <- log(y[which(x>0.03)])
y.log[is.infinite(y.log)] = 0
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
#text(max(x),max(y),substr(i,1,9))
# points(data[,2],data[,3],col = col[j])
j = j+1;
}
leg.txt = files
legend("topleft",  leg.txt
,col= col
,bty = "n"
,lwd = c(2,2)
,cex =0.35
,pt.cex =0.35
)
dev.off()
dev.off()
j=1
dev.off()
for(i in files) {
pdf(paste('~/simpleR/australia/',i,'.pdf',sep=''))
setwd('~/simpleTree/output')
data <- read.csv(i)
x<-data[,8]
y<-data[,10]
x.log <- log(x[which(x>0.03)])
y.log <- log(y[which(x>0.03)])
y.log[is.infinite(y.log)] = 0
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
plot(x,y,xlim = c(0,0.11), ylim = c(0,0.25),xlab ="radius[m]", ylab = "volume[m^3]",col="green",main = i)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col="green",lwd=2)
#curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
#curve( (expA *x** b),0,max(x),add=TRUE,col="blue",lwd=2)
leg.txt <- c("f(x) = a * x ^ b"
,"a:"
,formatC(coefficients(nls.vol)[1],big.mark=",")
,"b:"
,formatC(coefficients(nls.vol)[2],big.mark=",")
,"r^2:"
,formatC(r2nls,big.mark=",")
)
#legend("topleft",  leg.txt, col = c(col=col[j],"white","white","white","white","white","white","white","white","white","white")
legend("topleft",  leg.txt, col = c(col=col[j],"green","white","white","white","white","white","white","white","white","white")
,bty = "n"
,lwd = c(2,2)
,cex =1
,pt.cex =1
)
# points(data[,2],data[,3],col = col[j])
j = j+1;
dev.off()
}
plot(x,y)
dev.off()
dev.off()
dev.off()
dev.off()
dev.off()
dev.off()
dev.off()
dev.off()
dev.off()
dev.off()
dev.off()
source('~/.active-rstudio-document')
plot(x,y)
dev.off()
dev.off()
dev.off()
plot(x,y)
library(nls2)
setwd('~/simpleTree/output')
files <- list.files(pattern="detailed.csv$")
col<-rgb(runif(length(files)),runif(length(files)),runif(length(files)))
j = 1;
pdf('~/simpleR/australia/all.pdf')
plot(0,0,xlim = c(0,0.001), ylim = c(0,0.6),xlab ="radius", ylab = "volume")
for(i in files) {
setwd('~/simpleTree/output')
data <- read.csv(i)
x<-data[,10]
y<-data[,8]
x.log <- log(x)
y.log <- log(y)
# x.log <- log(x[which(x>0.03)])
#  y.log <- log(y[which(x>0.03)])
y.log[is.infinite(y.log)] = 0
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
#text(max(x),max(y),substr(i,1,9))
# points(data[,2],data[,3],col = col[j])
j = j+1;
}
leg.txt = files
legend("topleft",  leg.txt
,col= col
,bty = "n"
,lwd = c(2,2)
,cex =0.35
,pt.cex =0.35
)
dev.off()
library(nls2)
setwd('~/simpleTree/output')
files <- list.files(pattern="detailed.csv$")
col<-rgb(runif(length(files)),runif(length(files)),runif(length(files)))
j = 1;
pdf('~/simpleR/australia/all.pdf')
plot(0,0,xlim = c(0,0.001), ylim = c(0,0.006),xlab ="radius", ylab = "volume")
for(i in files) {
setwd('~/simpleTree/output')
data <- read.csv(i)
x<-data[,10]
y<-data[,8]
x.log <- log(x)
y.log <- log(y)
# x.log <- log(x[which(x>0.03)])
#  y.log <- log(y[which(x>0.03)])
y.log[is.infinite(y.log)] = 0
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
#text(max(x),max(y),substr(i,1,9))
# points(data[,2],data[,3],col = col[j])
j = j+1;
}
leg.txt = files
legend("topleft",  leg.txt
,col= col
,bty = "n"
,lwd = c(2,2)
,cex =0.35
,pt.cex =0.35
)
dev.off()
library(nls2)
setwd('~/simpleTree/output')
files <- list.files(pattern="detailed.csv$")
col<-rgb(runif(length(files)),runif(length(files)),runif(length(files)))
j = 1;
pdf('~/simpleR/australia/all.pdf')
plot(0,0,xlim = c(0,0.001), ylim = c(0,0.00006),xlab ="radius", ylab = "volume")
for(i in files) {
setwd('~/simpleTree/output')
data <- read.csv(i)
x<-data[,10]
y<-data[,8]
x.log <- log(x)
y.log <- log(y)
# x.log <- log(x[which(x>0.03)])
#  y.log <- log(y[which(x>0.03)])
y.log[is.infinite(y.log)] = 0
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
#text(max(x),max(y),substr(i,1,9))
# points(data[,2],data[,3],col = col[j])
j = j+1;
}
leg.txt = files
legend("topleft",  leg.txt
,col= col
,bty = "n"
,lwd = c(2,2)
,cex =0.35
,pt.cex =0.35
)
dev.off()
library(nls2)
setwd('~/simpleTree/output')
files <- list.files(pattern="detailed.csv$")
col<-rgb(runif(length(files)),runif(length(files)),runif(length(files)))
j = 1;
pdf('~/simpleR/australia/all.pdf')
plot(x,y,xlab ="radius", ylab = "volume")
for(i in files) {
setwd('~/simpleTree/output')
data <- read.csv(i)
x<-data[,10]
y<-data[,8]
x.log <- log(x)
y.log <- log(y)
# x.log <- log(x[which(x>0.03)])
#  y.log <- log(y[which(x>0.03)])
y.log[is.infinite(y.log)] = 0
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
#text(max(x),max(y),substr(i,1,9))
# points(data[,2],data[,3],col = col[j])
j = j+1;
}
leg.txt = files
legend("topleft",  leg.txt
,col= col
,bty = "n"
,lwd = c(2,2)
,cex =0.35
,pt.cex =0.35
)
dev.off()
source('~/.active-rstudio-document')
x
source('~/.active-rstudio-document')
for(i in files) {
pdf(paste('~/simpleR/australia/',i,'.pdf',sep=''))
setwd('~/simpleTree/output')
data <- read.csv(i)
x<-data[,10]
y<-data[,8]
x.log <- log(x)
y.log <- log(y)
#x.log <- log(x[which(x>0.03)])
#y.log <- log(y[which(x>0.03)])
x.log[is.infinite(x.log)] = 0
y.log[is.infinite(y.log)] = 0
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
plot(x,y,xlab ="radius[m]", ylab = "volume[m^3]",col="green",main = i)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col="green",lwd=2)
#curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
#curve( (expA *x** b),0,max(x),add=TRUE,col="blue",lwd=2)
leg.txt <- c("f(x) = a * x ^ b"
,"a:"
,formatC(coefficients(nls.vol)[1],big.mark=",")
,"b:"
,formatC(coefficients(nls.vol)[2],big.mark=",")
,"r^2:"
,formatC(r2nls,big.mark=",")
)
#legend("topleft",  leg.txt, col = c(col=col[j],"white","white","white","white","white","white","white","white","white","white")
legend("topleft",  leg.txt, col = c(col=col[j],"green","white","white","white","white","white","white","white","white","white")
,bty = "n"
,lwd = c(2,2)
,cex =1
,pt.cex =1
)
# points(data[,2],data[,3],col = col[j])
j = j+1;
dev.off()
}
View(data)
View(data)
data[,11]
data[1,11]
data[2,11]
data[3,11]
files
i<-files[44]
i
data <- read.csv(i)
x<-data[,10]
x<-data[,11]
y<-data[,9]
x.log <- log(x)
y.log <- log(y)
# x.log <- log(x[which(x>0.03)])
#  y.log <- log(y[which(x>0.03)])
y.log[is.infinite(y.log)] = 0
lm <- lm(y.log~x.log)
a <- coef(lm)[1]
b <- coef(lm)[2]
expA <- exp(a)
data2 <- data.frame(x,y)
nls.vol <- nls(y ~ b1*x**b2,data = data2,start = list(b1 = expA,b2 = b), control = list(maxiter=500,warnOnly = TRUE))
r2nls <- 1-(deviance(nls.vol)/sum((y-mean(y))^2))
curve( (coefficients(nls.vol)[1] *x** coefficients(nls.vol)[2]),0,max(x),add=TRUE,col=col[j],lwd=2)
plot(x,y)
x<-data[,10]
y<-data[,8]
plot(x,y)
x<-data[,10]
x<-data[,11]
y<-data[,9]
plot(x,y)
x<-data[,9]
y<-data[,11]
plot(x,y)
source('~/simpleR/australia/Allometry.R')
dev.off()
dev.off()
dev.off()
dev.off()
source('~/.active-rstudio-document')
source('~/simpleR/australia/Allometry.R')
dev.off()
dev.off()
dev.off()
dev.off()
source('~/.active-rstudio-document')
